_stdin	WS	1
_stdout	WS	1
_stderr	WS	1
.L1	STRING	"reloc: %04x -> %04x (%04x) | %04x\n"
.relocateSegment	PUSH	FP
	LD	FP,SP
	PUSH	G3
	PUSH	G4
	PUSH	G5
	PUSH	G6
	CALL	__stkChk
	LD	G3,#0
.L2
	CMP	G3,6,FP
	JGE	.L3
	PUSH	G3
	LD	G0,4,FP
	PUSH	G0
	CALL	___AddrAdd
	ADD	SP,#4
	LD	G4,G0
	LD	G0,G4
	ADDS	G0,#1
	LD	G0,0,G0
	AND	G0,#16383
	SHLA	G0,#2
	LD	G5,G0
	PUSH	G5
	LD	G0,8,FP
	PUSH	G0
	CALL	___AddrAdd
	ADD	SP,#4
	LD	G6,G0
	LD	G0,G6
	ADDS	G0,#1
	LD	G1,10,FP
	ADDS	G1,0,G4
	LD	G0,0,G0
	ST	G0,0,G1
	LD	G0,10,FP
	ADDS	G0,0,G4
	LD	G0,0,G0
	PUSH	G0
	PUSH	G5
	LD	G0,G6
	ADDS	G0,#1
	LD	G0,0,G0
	PUSH	G0
	LD	G0,0,G4
	PUSH	G0
	LD	G0,#.L1
	PUSH	G0
	CALL	_printf
	ADD	SP,#10
	LD	G0,G3
	ADD	G0,#4
	LD	G3,G0
	JMP	.L2
.L3
	LD	G0,#0
	POP	G6
	POP	G5
	POP	G4
	POP	G3
	POP	FP
	RET
